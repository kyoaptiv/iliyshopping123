# 手動設定資料庫指南

## 如果自動腳本無法執行，請按照以下步驟手動設定

### 步驟 1：確認 MySQL 服務運行

1. 按 `Win + R`，輸入 `services.msc`，按 Enter
2. 在服務列表中尋找 MySQL 相關服務（可能是 `MySQL80`、`MySQL`、`MySQL57` 等）
3. 確認服務狀態為「執行中」
4. 如果未運行，右鍵點擊服務 → 「啟動」

### 步驟 2：測試 MySQL 連線

開啟命令提示字元（cmd）或 PowerShell，執行：

```bash
# 測試使用密碼 12345 連線
mysql -u root -p12345

# 如果失敗，測試無密碼連線
mysql -u root
```

**如果兩個都失敗：**
- 您的 MySQL root 密碼可能不是 12345
- 請使用您實際的 MySQL root 密碼

### 步驟 3：建立資料庫

連線成功後，執行以下 SQL：

```sql
-- 建立資料庫
CREATE DATABASE IF NOT EXISTS yili_meat_shop 
CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- 使用資料庫
USE yili_meat_shop;
```

### 步驟 4：匯入資料庫結構

**方法 A：使用命令列**

```bash
# 如果 MySQL 密碼是 12345
mysql -u root -p12345 yili_meat_shop < database/schema.sql

# 如果 MySQL 沒有密碼
mysql -u root yili_meat_shop < database/schema.sql

# 如果 MySQL 密碼是其他
mysql -u root -p yili_meat_shop < database/schema.sql
# 然後輸入您的密碼
```

**方法 B：使用 MySQL Workbench**

1. 開啟 MySQL Workbench
2. 連線到 MySQL 伺服器
3. 開啟 `database/schema.sql` 檔案
4. 執行所有 SQL 語句

**方法 C：複製 SQL 語句**

1. 開啟 `database/schema.sql` 檔案
2. 複製所有內容
3. 在 MySQL Workbench 或命令列中執行

### 步驟 5：設定 .env 檔案

在 `server` 目錄建立或編輯 `.env` 檔案：

```env
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=您的MySQL密碼（如果沒有密碼則留空）
DB_NAME=yili_meat_shop
JWT_SECRET=yili-secret-key-12345
PORT=5000
EMAIL_USER=humblemars@gmail.com
EMAIL_PASS=
```

**重要：**
- 如果 MySQL root 沒有密碼，`DB_PASSWORD=` 後面留空
- 如果有密碼，填入實際的密碼（不一定是 12345）

### 步驟 6：驗證設定

執行測試腳本：

```bash
cd server
npm run test-db
```

應該看到：
```
✅ 資料庫連線成功！
✅ 找到管理員帳號
```

## 常見問題

### Q: 找不到 MySQL 命令？

**A:** MySQL 可能未加入系統 PATH，請使用完整路徑：
- 通常在：`C:\Program Files\MySQL\MySQL Server 8.0\bin\mysql.exe`
- 或：`C:\Program Files\MySQL\MySQL Server 5.7\bin\mysql.exe`

### Q: 忘記 MySQL root 密碼？

**A:** 需要重置 MySQL root 密碼，步驟較複雜，建議：
1. 使用 MySQL Workbench 嘗試連線
2. 或查看 MySQL 安裝時的設定記錄

### Q: MySQL 服務無法啟動？

**A:** 可能原因：
1. 端口被占用
2. 配置檔案錯誤
3. 資料目錄權限問題

建議檢查 MySQL 錯誤日誌（通常在 MySQL 安裝目錄的 `data` 資料夾）

### Q: 如何確認 MySQL root 密碼？

**A:** 嘗試以下方法：
1. 使用 MySQL Workbench 嘗試連線（會提示輸入密碼）
2. 查看 MySQL 安裝時的設定記錄
3. 如果使用 XAMPP，預設密碼通常是空的
4. 如果使用 WAMP，預設密碼通常是空的

## 完成後

設定完成後，您可以使用以下帳號登入後台：

- **帳號**：`admin`
- **密碼**：`12345`

（這是應用程式的管理員帳號，不是 MySQL 的 root 帳號）

